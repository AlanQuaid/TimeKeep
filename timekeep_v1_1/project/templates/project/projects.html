{% extends 'base.html' %}

{% load format_min %}

{% block title %}Projects | {% endblock %}

{% block content %}
<form method="post" action=".">
        {% csrf_token %}
                    <div class="col">
                        <label class="fw-semibold">Project name</label>
        <div class="form-group mt-1">
            <select class="form-control" name="project" v-model="project" v-on:change="getTasks()">
<option value="">Choose project</option>
                    {% for project in projects %}
                        <option value="{{ project.id }}">{{ project.title }}</option>
                    {% endfor %}
            </select>
        </div>

        <div class="form-group mt-1">
            <select class="form-control" name="task" v-model="task">


                        <option v-for="task in tasks" v-bind:key="task.id" :value="task.id">[[ task.title ]]</option>

            </select>
        </div>
    </div>
    <div class="row mt-3">


                        <div class="col">
                            <label class="fw-semibold">Hours</label>
        <div class="form-group mt-1">
            <select class="form-control" name="hours">
<option value="0">0h</option>
                    {% for i in "x"|rjust:"23" %}
                        <option value="{{ forloop.counter }}"{% if hours == forloop.counter %} selected{% endif %}>{{ forloop.counter }}h</option>
                    {% endfor %}
            </select>
        </div>
    </div>

        <div class="col">
            <label class="fw-semibold">Minutes</label>
        <div class="form-group mt-1">
            <select class="form-control" name="minutes">
                    <option value="0">0m</option>
                    {% for i in "x"|rjust:"59" %}
                        <option value="{{ forloop.counter }}"{% if minutes == forloop.counter %} selected{% endif %}>{{ forloop.counter }}m</option>
                    {% endfor %}
            </select>
        </div>
    </div>








    </div>

    <div class="field mt-3">
        <label class="fw-semibold">Date</label>

        <div class="control mt-1">
            <input type="date" id="id_date" class="input form-control" name="date" value="{{ today|date:'Y-m-d' }}" placeholder="yyyy-mm-dd">
        </div>
    </div>


       <div class="d-grid gap-2 d-md-flex justify-content-md-start mb-4 mb-lg-3">
                                                            <div class="form-group row mt-3">
                                                                <div class="col-lg-12">
                                                                   <button class="btn btn-success active" type="submit">Save Changes</button>
                                                                </div>
                                                            </div>
        </div>
        </form>
{% endblock %}